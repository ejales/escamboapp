<h1 class="page-header">Administradores</h1>

<div class="col-lg-12">
    <div class="panel panel-default">
        <div class="panel-heading">
            Listando Administradores
            <!-- <button class="btn btn-success btn-circle pull-right" type="button" style="margin-top: -5px"><i class="fa fa-plus"></i> -->
            <% if policy(@admins).new? %>
                <%= link_to new_backoffice_admin_path, class: "btn btn-success btn-circle pull-right", style: "margin-top: -5px" do %>
                    <i class="fa fa-plus"></i>
                <% end %>
            <% end %>
            <!-- </button> -->
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th><%= @admins.model.human_attribute_name('name') %></th>
                            <th><%= @admins.model.human_attribute_name('role') %></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                     <% @admins.each do |a| %>   
                        <tr>
                            <td><%= a.id %></td>
                            <td><%= a.name %></td>
                            <td><%= a.role_i18n %></td>
                            <td style="width: 180px">
                            <%= link_to edit_backoffice_sendmail_path(a), class: "btn btn-info btn-circle", remote: true do %>
                                    <i class="fa fa-envelope"></i>
                                <% end %>
                                <%= link_to edit_backoffice_admin_path(a), class: "btn btn-primary btn-circle" do %>
                                    <i class="fa fa-edit"></i>
                                <% end %>
                                
                                <% if current_admin.id != a.id  && policy(@admins).destroy? %>
                                    <%= link_to backoffice_admin_path(a), method: :delete, class: "btn btn-danger btn-circle", data: {confirm: t('messages.confirm_with', item: a.name)} do %>
                                        <i class="fa fa-close"></i>
                                    <% end %>
                                <% else %>
                                    <%= link_to "#", class: "btn btn-danger btn-circle", disabled: "disabled" do %>
                                        <i class="fa fa-close"></i>
                                    <% end %>
                                <% end %>
                            </td>
                        </tr>
                    <% end %>
                    </tbody>
                </table>
            </div>
            <!-- /.table-responsive -->
        </div>
        <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
</div>

<%= render partial: "backoffice/admins/shared/send_mail_modal" %>
